(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{jaOa:function(e,o,r){"use strict";r.r(o),r.d(o,"RegisterPageModule",function(){return N});var t=r("ofXK"),n=r("3Pt+"),i=r("TEn/"),a=r("tyNb"),l=r("mrSG"),s=r("fXoL"),m=r("N/25"),b=r("PZxA");function c(e,o){if(1&e&&(s.Ob(0,"ion-item",16),s.Ob(1,"ion-label"),s.mc(2),s.Nb(),s.Nb()),2&e){const e=s.Yb();s.Bb(2),s.nc(e.nameErrorMsg)}}function d(e,o){if(1&e&&(s.Ob(0,"ion-item",16),s.Ob(1,"ion-label"),s.mc(2),s.Nb(),s.Nb()),2&e){const e=s.Yb();s.Bb(2),s.nc(e.lastNameErrorMsg)}}function u(e,o){if(1&e&&(s.Ob(0,"ion-item",16),s.Ob(1,"ion-label"),s.mc(2),s.Nb(),s.Nb()),2&e){const e=s.Yb();s.Bb(2),s.nc(e.emailErrorMsg)}}function g(e,o){if(1&e&&(s.Ob(0,"ion-item",16),s.Ob(1,"ion-label"),s.mc(2),s.Nb(),s.Nb()),2&e){const e=s.Yb();s.Bb(2),s.nc(e.phoneErrorMsg)}}function f(e,o){if(1&e&&(s.Ob(0,"ion-item",16),s.Ob(1,"ion-label"),s.mc(2),s.Nb(),s.Nb()),2&e){const e=s.Yb();s.Bb(2),s.nc(e.passwordErrorMsg)}}function p(e,o){if(1&e&&(s.Ob(0,"ion-item",16),s.Ob(1,"ion-label"),s.mc(2),s.Nb(),s.Nb()),2&e){const e=s.Yb();s.Bb(2),s.nc(e.confirmPasswordErrorMsg)}}const h=[{path:"",component:(()=>{class e{constructor(e,o,r,t,i,a){this.formBuilder=e,this.menu=o,this.alertCtrl=r,this.router=t,this.authService=i,this.validatorService=a,this.namePattern="[a-zA-Z ]{3,50}",this.emailPattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",this.form=this.formBuilder.group({name:["",[n.l.required,n.l.minLength(3),n.l.pattern(this.namePattern)]],lastName:["",[n.l.required,n.l.minLength(3),n.l.pattern(this.namePattern)]],email:["",[n.l.required,n.l.pattern(this.emailPattern)]],phone:["",[n.l.required,n.l.minLength(8)]],password:["",[n.l.required,n.l.minLength(6),n.l.maxLength(20)]],password2:[""]},{validators:[this.validatorService.camposIguales("password","password2")]}),this.menu.enable(!1,"first")}get nameErrorMsg(){var e;const o=null===(e=this.form.get("name"))||void 0===e?void 0:e.errors;return(null==o?void 0:o.required)?"El nombre es obligatorio.":(null==o?void 0:o.minlength)?"El nombre debe contener m\xednimo 3 caracteres.":(null==o?void 0:o.pattern)?"El nombre no es v\xe1lido.":""}get lastNameErrorMsg(){var e;const o=null===(e=this.form.get("lastName"))||void 0===e?void 0:e.errors;return(null==o?void 0:o.required)?"El apellido es obligatorio.":(null==o?void 0:o.minlength)?"El apellido debe contener m\xednimo 3 caracteres.":(null==o?void 0:o.pattern)?"El apellido no es v\xe1lido":""}get emailErrorMsg(){var e;const o=null===(e=this.form.get("email"))||void 0===e?void 0:e.errors;return(null==o?void 0:o.required)?"El correo es obligatorio.":(null==o?void 0:o.pattern)?"El formato del correo no es v\xe1lido.":""}get phoneErrorMsg(){var e;const o=null===(e=this.form.get("phone"))||void 0===e?void 0:e.errors;return(null==o?void 0:o.required)?"El tel\xe9fono es obligatorio":(null==o?void 0:o.minlength)?"El tel\xe9fono debe contener m\xednimio 8 caracteres.":""}get passwordErrorMsg(){var e;const o=null===(e=this.form.get("password"))||void 0===e?void 0:e.errors;return(null==o?void 0:o.required)?"La contrase\xf1a es obligatoria.":(null==o?void 0:o.minlength)?"La contrase\xf1a debe contener m\xednimo 6 caracteres.":(null==o?void 0:o.maxlength)?"La contrase\xf1a debe contener m\xe1ximo 20 caracteres.":""}get confirmPasswordErrorMsg(){var e;const o=null===(e=this.form.get("password2"))||void 0===e?void 0:e.errors;return!1!==(null==o?void 0:o.noIguales)?"Las contrase\xf1as no son iguales.":(console.log(o),"")}ngOnInit(){}onRegister(){return Object(l.b)(this,void 0,void 0,function*(){const{email:e,password:o}=this.form.value,r=this.form.value;delete r.password,delete r.password2;try{if(!this.form.valid)return void this.form.markAllAsTouched();const t=yield this.authService.registerWithEmailPassword(e,o,r);if(t){const e={name:this.form.get("name").value,lastName:this.form.get("lastName").value,email:this.form.get("email").value,emailVerified:t.emailVerified,phone:this.form.get("phone").value,role:"Empleado",uid:t.uid};this.authService.addUser(e),yield this.verifyEmailAlert()}}catch(t){console.log("\ud83d\ude80 ~ file: register.page.ts ~ line 40 ~ RegisterPage ~ onRegister ~ err",t)}})}campoNoValido(e){var o,r;return(null===(o=this.form.get(e))||void 0===o?void 0:o.invalid)&&(null===(r=this.form.get(e))||void 0===r?void 0:r.touched)}verifyEmailAlert(){return Object(l.b)(this,void 0,void 0,function*(){const e=yield this.alertCtrl.create({header:"Registrado correctamente",message:"Verifique su correo",buttons:[{text:"OK",handler:()=>{this.form.reset(),this.router.navigate(["/login"])}}]});yield e.present(),yield e.onDidDismiss(),this.form.reset(),this.router.navigate(["/login"])})}}return e.\u0275fac=function(o){return new(o||e)(s.Lb(n.a),s.Lb(i.D),s.Lb(i.a),s.Lb(a.g),s.Lb(m.a),s.Lb(b.a))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-register"]],decls:44,vars:7,consts:[[1,"ion-no-border"],[1,"ion-text-center"],[1,"main"],[3,"formGroup","ngSubmit"],["position","floating"],["type","text","formControlName","name"],["class","error",4,"ngIf"],["type","text","formControlName","lastName"],["type","email","formControlName","email"],["type","tel","formControlName","phone"],["type","password","formControlName","password"],["type","password","formControlName","password2"],[1,"no-border"],["routerLink","/login"],[1,"form-button","ion-margin-top"],["expand","block","type","submit"],[1,"error"]],template:function(e,o){1&e&&(s.Ob(0,"ion-header",0),s.Ob(1,"ion-toolbar"),s.Ob(2,"ion-title",1),s.mc(3,"Registrar usuario"),s.Nb(),s.Nb(),s.Nb(),s.Ob(4,"ion-content"),s.Ob(5,"div",2),s.Ob(6,"form",3),s.Wb("ngSubmit",function(){return o.onRegister()}),s.Ob(7,"ion-item"),s.Ob(8,"ion-label",4),s.mc(9,"Nombre"),s.Nb(),s.Mb(10,"ion-input",5),s.Nb(),s.kc(11,c,3,1,"ion-item",6),s.Ob(12,"ion-item"),s.Ob(13,"ion-label",4),s.mc(14,"Apellido(s)"),s.Nb(),s.Mb(15,"ion-input",7),s.Nb(),s.kc(16,d,3,1,"ion-item",6),s.Ob(17,"ion-item"),s.Ob(18,"ion-label",4),s.mc(19,"Correo electr\xf3nico"),s.Nb(),s.Mb(20,"ion-input",8),s.Nb(),s.kc(21,u,3,1,"ion-item",6),s.Ob(22,"ion-item"),s.Ob(23,"ion-label",4),s.mc(24,"Tel\xe9fono"),s.Nb(),s.Mb(25,"ion-input",9),s.Nb(),s.kc(26,g,3,1,"ion-item",6),s.Ob(27,"ion-item"),s.Ob(28,"ion-label",4),s.mc(29,"Contrase\xf1a"),s.Nb(),s.Mb(30,"ion-input",10),s.Nb(),s.kc(31,f,3,1,"ion-item",6),s.Ob(32,"ion-item"),s.Ob(33,"ion-label",4),s.mc(34,"Confirmar contrase\xf1a"),s.Nb(),s.Mb(35,"ion-input",11),s.Nb(),s.kc(36,p,3,1,"ion-item",6),s.Ob(37,"div"),s.Ob(38,"ion-item",12),s.Ob(39,"a",13),s.mc(40,"\xbfYa tienes una cuenta, haz clic aqui?"),s.Nb(),s.Nb(),s.Nb(),s.Ob(41,"div",14),s.Ob(42,"ion-button",15),s.mc(43," Registrarse "),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb()),2&e&&(s.Bb(6),s.ec("formGroup",o.form),s.Bb(5),s.ec("ngIf",o.campoNoValido("name")),s.Bb(5),s.ec("ngIf",o.campoNoValido("lastName")),s.Bb(5),s.ec("ngIf",o.campoNoValido("email")),s.Bb(5),s.ec("ngIf",o.campoNoValido("phone")),s.Bb(5),s.ec("ngIf",o.campoNoValido("password")),s.Bb(5),s.ec("ngIf",o.campoNoValido("password2")))},directives:[i.j,i.A,i.y,i.g,n.m,n.h,n.c,i.m,i.o,i.l,i.I,n.g,n.b,t.j,a.i,i.G,i.d],styles:[".main[_ngcontent-%COMP%]{align-items:center;display:flex;height:100%;justify-content:center;width:100%}form[_ngcontent-%COMP%]{margin:0 auto;width:50%}.no-border[_ngcontent-%COMP%]{--border-style:none;--color:#3880ff}.no-border[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.error[_ngcontent-%COMP%]{--border-style:none;color:red}"]}),e})()}];let v=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({imports:[[a.j.forChild(h)],a.j]}),e})(),N=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({imports:[[t.c,n.k,i.B,v]]}),e})()}}]);