(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{MP20:function(o,e,n){"use strict";n.r(e),n.d(e,"UsersPageModule",function(){return O});var t=n("ofXK"),i=n("3Pt+"),r=n("TEn/"),c=n("tyNb"),s=n("fXoL"),l=n("mrSG"),b=n("lJxs"),u=n("I/3d"),a=n("UbJi");let m=(()=>{class o{constructor(o,e){this.af=o,this.afa=e,this.usersCollection=this.af.collection("users"),this.users=this.usersCollection.snapshotChanges().pipe(Object(b.a)(o=>o.map(o=>{const e=o.payload.doc.data();return e.id=o.payload.doc.id,e})))}getAllUsers(){try{return this.users}catch(o){console.log(o)}}updateUser(o){return Object(l.b)(this,void 0,void 0,function*(){try{const e=o.id;this.af.collection("users").doc(e).update(o)}catch(e){console.log(e)}})}deleteUser(o){return Object(l.b)(this,void 0,void 0,function*(){try{yield this.af.collection("users").doc(o).delete()}catch(e){console.log(e)}})}}return o.\u0275fac=function(e){return new(e||o)(s.Sb(u.a),s.Sb(a.a))},o.\u0275prov=s.Hb({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function d(o,e){if(1&o){const o=s.Pb();s.Ob(0,"ion-row"),s.Ob(1,"ion-col",6),s.mc(2),s.Zb(3,"titlecase"),s.Nb(),s.Ob(4,"ion-col",6),s.mc(5),s.Zb(6,"titlecase"),s.Nb(),s.Ob(7,"ion-col",6),s.mc(8),s.Nb(),s.Ob(9,"ion-col",6),s.mc(10),s.Nb(),s.Ob(11,"ion-col",16),s.Ob(12,"ion-button",2),s.Wb("click",function(){s.hc(o);const n=e.$implicit;return s.Yb().getUserRole(n)}),s.Mb(13,"ion-icon",17),s.Nb(),s.Ob(14,"ion-button",18),s.Wb("click",function(){s.hc(o);const n=e.$implicit;return s.Yb().onDeleteUser(n.id)}),s.Mb(15,"ion-icon",19),s.Nb(),s.Nb(),s.Nb()}if(2&o){const o=e.$implicit;s.Bb(2),s.nc(s.ac(3,4,o.name)),s.Bb(3),s.nc(s.ac(6,6,o.lastName)),s.Bb(3),s.nc(o.phone),s.Bb(2),s.nc(o.role)}}function f(o,e){if(1&o&&(s.Ob(0,"ion-select-option",20),s.mc(1),s.Nb()),2&o){const o=e.$implicit;s.ec("value",o.name),s.Bb(1),s.oc(" ",o.name," ")}}const p=[{path:"",component:(()=>{class o{constructor(o,e,n){this.menu=o,this.formBuilder=e,this.userService=n,this.roles=[{name:"Administrador"},{name:"Gerente"},{name:"Empleado"}],this.allUsers=[],this.form=this.formBuilder.group({role:["",[i.l.required]]}),this.users=this.userService.getAllUsers(),this.users.subscribe(o=>{console.log(o),this.allUsers=o.filter(o=>"Administrador"!==o.role)})}ngOnInit(){this.menu.swipeGesture(!1,"first")}getUserRole(o){this.updateUser=o,this.form.get("role").setValue(o.role)}onUpdateRole(){this.form.invalid||(this.updateUser.role=this.form.get("role").value,this.userService.updateUser(this.updateUser))}onDeleteUser(o){this.userService.deleteUser(o)}onToggleMenu(){this.menu.enable(!0,"first"),this.menu.open("first")}}return o.\u0275fac=function(e){return new(e||o)(s.Lb(r.D),s.Lb(i.a),s.Lb(m))},o.\u0275cmp=s.Fb({type:o,selectors:[["app-users"]],decls:40,vars:4,consts:[[1,"ion-no-border",3,"translucent"],["slot","start"],[3,"click"],["slot","icon-only","name","menu-outline"],[1,"ion-text-center"],["size","8"],["size","2",1,"ion-text-center"],[4,"ngFor","ngForOf"],["size","4"],[3,"formGroup","ngSubmit"],["placeholder","Seleccione uno","interface","popover","formControlName","role"],[3,"value",4,"ngFor","ngForOf"],[1,"buttons"],["fill","outline","type","button","color","danger",1,"ion-margin-top"],["slot","start","name","add"],["fill","outline",1,"ion-margin-top",3,"click"],["size","2"],["slot","icon-only","name","sync-outline"],["color","danger",3,"click"],["slot","icon-only","name","trash-outline"],[3,"value"]],template:function(o,e){1&o&&(s.Ob(0,"ion-header",0),s.Ob(1,"ion-toolbar"),s.Ob(2,"ion-buttons",1),s.Ob(3,"ion-button",2),s.Wb("click",function(){return e.onToggleMenu()}),s.Mb(4,"ion-icon",3),s.Nb(),s.Nb(),s.Ob(5,"ion-title",4),s.mc(6," Usuarios "),s.Nb(),s.Nb(),s.Nb(),s.Ob(7,"ion-content"),s.Ob(8,"ion-grid"),s.Ob(9,"ion-row"),s.Ob(10,"ion-col",5),s.Ob(11,"ion-grid"),s.Ob(12,"ion-row"),s.Ob(13,"ion-col",6),s.Ob(14,"h6"),s.mc(15,"Nombre"),s.Nb(),s.Nb(),s.Ob(16,"ion-col",6),s.Ob(17,"h6"),s.mc(18,"Apellido"),s.Nb(),s.Nb(),s.Ob(19,"ion-col",6),s.Ob(20,"h6"),s.mc(21,"Tel\xe9fono"),s.Nb(),s.Nb(),s.Ob(22,"ion-col",6),s.Ob(23,"h6"),s.mc(24,"Rol"),s.Nb(),s.Nb(),s.Nb(),s.kc(25,d,16,8,"ion-row",7),s.Nb(),s.Nb(),s.Ob(26,"ion-col",8),s.Ob(27,"form",9),s.Wb("ngSubmit",function(){return e.onUpdateRole()}),s.Ob(28,"ion-item"),s.Ob(29,"ion-label"),s.mc(30,"Puesto:"),s.Nb(),s.Ob(31,"ion-select",10),s.kc(32,f,2,2,"ion-select-option",11),s.Nb(),s.Nb(),s.Ob(33,"div",12),s.Ob(34,"ion-button",13),s.Mb(35,"ion-icon",14),s.mc(36," Cancelar "),s.Nb(),s.Ob(37,"ion-button",15),s.Wb("click",function(){return e.onUpdateRole()}),s.Mb(38,"ion-icon",14),s.mc(39," Actualizar "),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb()),2&o&&(s.ec("translucent",!0),s.Bb(25),s.ec("ngForOf",e.allUsers),s.Bb(2),s.ec("formGroup",e.form),s.Bb(5),s.ec("ngForOf",e.roles))},directives:[r.j,r.A,r.e,r.d,r.k,r.y,r.g,r.i,r.t,r.f,t.i,i.m,i.h,i.c,r.m,r.o,r.v,r.H,i.g,i.b,r.w],pipes:[t.m],styles:[""]}),o})()}];let h=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=s.Jb({type:o}),o.\u0275inj=s.Ib({imports:[[c.j.forChild(p)],c.j]}),o})(),O=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=s.Jb({type:o}),o.\u0275inj=s.Ib({imports:[[t.c,i.k,r.B,h]]}),o})()}}]);