(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{qz0O:function(e,o,n){"use strict";n.r(o),n.d(o,"ProvidersPageModule",function(){return k});var t=n("ofXK"),r=n("3Pt+"),i=n("TEn/"),c=n("tyNb"),l=n("mrSG"),a=n("fXoL"),s=n("lJxs"),b=n("I/3d");let m=(()=>{class e{constructor(e){this.af=e,this.providersCollection=this.af.collection("providers"),this.providers=this.providersCollection.snapshotChanges().pipe(Object(s.a)(e=>e.map(e=>{const o=e.payload.doc.data();return o.id=e.payload.doc.id,o})))}getAllProviders(){try{return this.providers}catch(e){console.log("Error en la l\xednea 25 provider.Service",e)}}addProvider(e){return Object(l.b)(this,void 0,void 0,function*(){try{yield this.af.collection("providers").add(e)}catch(o){console.log("Error en la l\xednea 25 provider.Service",o)}})}deleteProvider(e){return Object(l.b)(this,void 0,void 0,function*(){try{yield this.af.collection("providers").doc(e).delete()}catch(o){console.log("Error en la l\xednea 35 provider.Service",o)}})}updateProvider(e){return Object(l.b)(this,void 0,void 0,function*(){try{const o=e.id;this.af.collection("providers").doc(o).update(e)}catch(o){console.log("Error en la l\xednea 44 provider.Service",o)}})}}return e.\u0275fac=function(o){return new(o||e)(a.Sb(b.a))},e.\u0275prov=a.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function d(e,o){if(1&e&&(a.Ob(0,"ion-item",11),a.Ob(1,"ion-label"),a.mc(2),a.Nb(),a.Nb()),2&e){const e=a.Yb();a.Bb(2),a.nc(e.nameProviderErrorMsg)}}function u(e,o){if(1&e&&(a.Ob(0,"ion-item",11),a.Ob(1,"ion-label"),a.mc(2),a.Nb(),a.Nb()),2&e){const e=a.Yb();a.Bb(2),a.nc(e.nameCompanyErrorMsg)}}function p(e,o){if(1&e&&(a.Ob(0,"ion-select-option",12),a.mc(1),a.Nb()),2&e){const e=o.$implicit;a.ec("value",e.name),a.Bb(1),a.nc(e.name)}}function v(e,o){if(1&e&&(a.Ob(0,"ion-item",11),a.Ob(1,"ion-label"),a.mc(2),a.Nb(),a.Nb()),2&e){const e=a.Yb();a.Bb(2),a.nc(e.categoryErrorMsg)}}function h(e,o){if(1&e&&(a.Ob(0,"ion-item",11),a.Ob(1,"ion-label"),a.mc(2),a.Nb(),a.Nb()),2&e){const e=a.Yb();a.Bb(2),a.nc(e.telephoneErrorMsg)}}function f(e,o){if(1&e&&(a.Ob(0,"ion-item",11),a.Ob(1,"ion-label"),a.mc(2),a.Nb(),a.Nb()),2&e){const e=a.Yb();a.Bb(2),a.nc(e.emailErrorMsg)}}function g(e,o){1&e&&(a.Ob(0,"div"),a.Ob(1,"ion-button",13),a.mc(2," A\xf1adir "),a.Nb(),a.Nb())}function O(e,o){if(1&e){const e=a.Pb();a.Ob(0,"div"),a.Ob(1,"ion-button",14),a.Wb("click",function(){return a.hc(e),a.Yb().onUpdate()}),a.mc(2," Actualizar "),a.Nb(),a.Nb()}}let N=(()=>{class e{constructor(e,o){this.formBuilder=e,this.providerService=o,this.namePattern="[a-zA-Z ]{3,50}",this.emailPattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",this.categorias=[{name:"Pastillas"},{name:"Hierbas"},{name:"Esot\xe9ricos"}],this.form=this.formBuilder.group({nameProvider:["",[r.l.required,r.l.minLength(3),r.l.pattern(this.namePattern)]],nameCompany:["",[r.l.required,r.l.minLength(3)]],category:["",[r.l.required]],telephone:["",[r.l.required]],email:["",[r.l.required,r.l.pattern(this.emailPattern)]]})}campoNoValido(e){var o,n;return(null===(o=this.form.get(e))||void 0===o?void 0:o.invalid)&&(null===(n=this.form.get(e))||void 0===n?void 0:n.touched)}get nameProviderErrorMsg(){var e;const o=null===(e=this.form.get("nameProvider"))||void 0===e?void 0:e.errors;return(null==o?void 0:o.required)?"El campo es obligatorio.":(null==o?void 0:o.minlength)?"Debe contener m\xednimo 3 caracteres.":(null==o?void 0:o.pattern)?"El nombre no es v\xe1lido.":""}get nameCompanyErrorMsg(){var e;const o=null===(e=this.form.get("nameCompany"))||void 0===e?void 0:e.errors;return(null==o?void 0:o.required)?"El campo es obligatorio.":(null==o?void 0:o.minlength)?"Debe contener m\xednimo 3 caracteres.":""}get categoryErrorMsg(){var e;const o=null===(e=this.form.get("category"))||void 0===e?void 0:e.errors;return(null==o?void 0:o.required)?"El campo es obligatorio.":""}get telephoneErrorMsg(){var e;const o=null===(e=this.form.get("telephone"))||void 0===e?void 0:e.errors;return(null==o?void 0:o.required)?"El campo es obligatorio.":(null==o?void 0:o.pattern)?"El tel\xe9fono no tiene un formato correcto.":""}get emailErrorMsg(){var e;const o=null===(e=this.form.get("email"))||void 0===e?void 0:e.errors;return(null==o?void 0:o.required)?"El campo es obligatorio.":(null==o?void 0:o.pattern)?"El correo no tiene un formato correcto.":""}onAddProvider(){console.log(this.form.getError("telephone")),this.form.invalid?this.form.markAllAsTouched():this.providerService.addProvider(this.form.value)}onUpdate(){const e=this.form.value;e.id=this.providerId,this.providerService.updateProvider(e),this.name="",this.form.reset()}ngOnInit(){this.name&&(this.form.get("nameProvider").setValue(this.name),this.form.get("nameCompany").setValue(this.nameCompany),this.form.get("category").setValue(this.category),this.form.get("telephone").setValue(this.telephone),this.form.get("email").setValue(this.email))}}return e.\u0275fac=function(o){return new(o||e)(a.Lb(r.a),a.Lb(m))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-modal"]],inputs:{name:"name",nameCompany:"nameCompany",category:"category",telephone:"telephone",email:"email",providerId:"providerId"},decls:37,vars:9,consts:[[3,"formGroup","ngSubmit"],["position","floating"],["color","danger"],["type","text","formControlName","nameProvider"],["class","error",4,"ngIf"],["type","text","formControlName","nameCompany"],["placeholder","Categor\xeda","interface","popover","formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["type","tel","pattern","(\\(\\d{3}\\)[.-]?|\\d{3}[.-]?)?\\d{3}[.-]?\\d{4}","formControlName","telephone"],["type","email","formControlName","email"],[4,"ngIf"],[1,"error"],[3,"value"],["type","submit","color","success","expand","block","fill","outline","shape","round",1,"ion-margin-top"],["color","success","expand","block","fill","outline","shape","round",1,"ion-margin-top",3,"click"]],template:function(e,o){1&e&&(a.Ob(0,"div"),a.Ob(1,"form",0),a.Wb("ngSubmit",function(){return o.onAddProvider()}),a.Ob(2,"ion-list"),a.Ob(3,"ion-item"),a.Ob(4,"ion-label",1),a.mc(5,"Nombre Proveedor"),a.Ob(6,"ion-text",2),a.mc(7,"*"),a.Nb(),a.Nb(),a.Mb(8,"ion-input",3),a.Nb(),a.kc(9,d,3,1,"ion-item",4),a.Ob(10,"ion-item"),a.Ob(11,"ion-label",1),a.mc(12,"Nombre compa\xf1ia"),a.Ob(13,"ion-text",2),a.mc(14,"*"),a.Nb(),a.Nb(),a.Mb(15,"ion-input",5),a.Nb(),a.kc(16,u,3,1,"ion-item",4),a.Ob(17,"ion-item"),a.Ob(18,"ion-select",6),a.kc(19,p,2,2,"ion-select-option",7),a.Nb(),a.Nb(),a.kc(20,v,3,1,"ion-item",4),a.Ob(21,"ion-item"),a.Ob(22,"ion-label",1),a.mc(23,"Celular"),a.Ob(24,"ion-text",2),a.mc(25,"*"),a.Nb(),a.Nb(),a.Mb(26,"ion-input",8),a.Nb(),a.kc(27,h,3,1,"ion-item",4),a.Ob(28,"ion-item"),a.Ob(29,"ion-label",1),a.mc(30,"Correo"),a.Ob(31,"ion-text",2),a.mc(32,"*"),a.Nb(),a.Nb(),a.Mb(33,"ion-input",9),a.Nb(),a.kc(34,f,3,1,"ion-item",4),a.kc(35,g,3,0,"div",10),a.kc(36,O,3,0,"div",10),a.Nb(),a.Nb(),a.Nb()),2&e&&(a.Bb(1),a.ec("formGroup",o.form),a.Bb(8),a.ec("ngIf",o.campoNoValido("nameProvider")),a.Bb(7),a.ec("ngIf",o.campoNoValido("nameCompany")),a.Bb(3),a.ec("ngForOf",o.categorias),a.Bb(1),a.ec("ngIf",o.campoNoValido("category")),a.Bb(7),a.ec("ngIf",o.campoNoValido("telephone")),a.Bb(7),a.ec("ngIf",o.campoNoValido("email")),a.Bb(1),a.ec("ngIf",!o.name),a.Bb(1),a.ec("ngIf",o.name))},directives:[r.m,r.h,r.c,i.p,i.m,i.o,i.x,i.l,i.I,r.g,r.b,t.j,i.v,i.H,t.i,r.j,i.w,i.d],styles:["div[_ngcontent-%COMP%]{display:flex;justify-content:center}.error[_ngcontent-%COMP%]{--border-style:none;color:red}"]}),e})();function y(e,o){if(1&e){const e=a.Pb();a.Ob(0,"ion-row"),a.Ob(1,"ion-col",9),a.Ob(2,"p"),a.mc(3),a.Nb(),a.Nb(),a.Ob(4,"ion-col",10),a.Ob(5,"p"),a.mc(6),a.Nb(),a.Nb(),a.Ob(7,"ion-col",11),a.Ob(8,"p"),a.mc(9),a.Nb(),a.Nb(),a.Ob(10,"ion-col",10),a.Ob(11,"p"),a.mc(12),a.Nb(),a.Nb(),a.Ob(13,"ion-col",10),a.Ob(14,"p"),a.mc(15),a.Nb(),a.Nb(),a.Ob(16,"ion-col",13),a.Ob(17,"ion-button",14),a.Wb("click",function(){a.hc(e);const n=o.$implicit;return a.Yb().onDelete(n.id)}),a.Mb(18,"ion-icon",15),a.Nb(),a.Ob(19,"ion-button",16),a.Wb("click",function(){a.hc(e);const n=o.$implicit;return a.Yb().presentModalProps(n)}),a.Mb(20,"ion-icon",17),a.Nb(),a.Nb(),a.Nb()}if(2&e){const e=o.$implicit;a.Bb(3),a.nc(e.nameProvider),a.Bb(3),a.nc(e.nameCompany),a.Bb(3),a.nc(e.category),a.Bb(3),a.nc(e.telephone),a.Bb(3),a.nc(e.email)}}const C=[{path:"",component:(()=>{class e{constructor(e,o,n,t){this.menu=e,this.modalCtrl=o,this.providerService=n,this.alerCtrl=t,this.allProviders=[],this.providers=this.providerService.getAllProviders(),this.providers.subscribe(e=>{this.allProviders=e.sort((e,o)=>e.nameCompany>o.nameCompany?1:e.nameCompany<o.nameCompany?-1:0)})}ngOnInit(){this.menu.swipeGesture(!1,"first")}onToggleMenu(){this.menu.enable(!0,"first"),this.menu.open("first")}onDelete(e){return Object(l.b)(this,void 0,void 0,function*(){yield this.presentAlert(e)})}presentModal(){return Object(l.b)(this,void 0,void 0,function*(){const e=yield this.modalCtrl.create({component:N,cssClass:"modal"});return yield e.present()})}presentModalProps(e){return Object(l.b)(this,void 0,void 0,function*(){const o=yield this.modalCtrl.create({component:N,cssClass:"modal",componentProps:{name:e.nameProvider,nameCompany:e.nameCompany,category:e.category,telephone:e.telephone,email:e.email,providerId:e.id}});return yield o.present()})}presentAlert(e){return Object(l.b)(this,void 0,void 0,function*(){const o=yield this.alerCtrl.create({header:"\xbfEst\xe1 seguro que desea eliminar?",buttons:[{text:"Cancelar"},{text:"OK",handler:()=>{this.providerService.deleteProvider(e)}}]});yield o.present()})}}return e.\u0275fac=function(o){return new(o||e)(a.Lb(i.D),a.Lb(i.E),a.Lb(m),a.Lb(i.a))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-providers"]],decls:33,vars:2,consts:[[1,"ion-no-border",3,"translucent"],["slot","start"],[3,"click"],["slot","icon-only","name","menu-outline"],[1,"ion-text-center"],["slot","end"],["color","success","fill","solid","shape","round",3,"click"],["slot","start","name","add"],["size","12"],["size","3",1,"ion-text-center"],["size","2",1,"ion-text-center"],["size","1",1,"ion-text-center"],[4,"ngFor","ngForOf"],["size","2"],["color","danger",1,"ion-margin-end",3,"click"],["slot","icon-only","name","trash-outline"],["color","success",3,"click"],["slot","icon-only","name","pencil-outline"]],template:function(e,o){1&e&&(a.Ob(0,"ion-header",0),a.Ob(1,"ion-toolbar"),a.Ob(2,"ion-buttons",1),a.Ob(3,"ion-button",2),a.Wb("click",function(){return o.onToggleMenu()}),a.Mb(4,"ion-icon",3),a.Nb(),a.Nb(),a.Ob(5,"ion-title",4),a.mc(6," Proveedores "),a.Nb(),a.Ob(7,"ion-buttons",5),a.Ob(8,"ion-button",6),a.Wb("click",function(){return o.presentModal()}),a.Mb(9,"ion-icon",7),a.mc(10," Agregar "),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Ob(11,"ion-content"),a.Ob(12,"ion-grid"),a.Ob(13,"ion-row"),a.Ob(14,"ion-col",8),a.Ob(15,"ion-grid"),a.Ob(16,"ion-row"),a.Ob(17,"ion-col",9),a.Ob(18,"h6"),a.mc(19," Nombre "),a.Nb(),a.Nb(),a.Ob(20,"ion-col",10),a.Ob(21,"h6"),a.mc(22," Compa\xf1ia "),a.Nb(),a.Nb(),a.Ob(23,"ion-col",11),a.Ob(24,"h6"),a.mc(25," Categor\xeda "),a.Nb(),a.Nb(),a.Ob(26,"ion-col",10),a.Ob(27,"h6"),a.mc(28," Celular "),a.Nb(),a.Nb(),a.Ob(29,"ion-col",10),a.Ob(30,"h6"),a.mc(31," Correo "),a.Nb(),a.Nb(),a.Nb(),a.kc(32,y,21,5,"ion-row",12),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb()),2&e&&(a.ec("translucent",!0),a.Bb(32),a.ec("ngForOf",o.allProviders))},directives:[i.j,i.A,i.e,i.d,i.k,i.y,i.g,i.i,i.t,i.f,t.i],styles:[""]}),e})()}];let P=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=a.Jb({type:e}),e.\u0275inj=a.Ib({imports:[[c.j.forChild(C)],c.j]}),e})(),k=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=a.Jb({type:e}),e.\u0275inj=a.Ib({imports:[[t.c,r.k,i.B,P]]}),e})()}}]);