(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{szOk:function(o,t,n){"use strict";n.r(t),n.d(t,"ProductsPageModule",function(){return C});var i=n("ofXK"),e=n("3Pt+"),c=n("TEn/"),r=n("tyNb"),b=n("mrSG"),l=n("fXoL"),s=n("8z/i");let u=(()=>{class o{transform(o,t){if(""!==t)return t=t.toLowerCase(),o.filter(o=>o.name.toLowerCase().includes(t))}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=l.Kb({name:"productFilter",type:o,pure:!0}),o})();function a(o,t){if(1&o){const o=l.Pb();l.Ob(0,"ion-item"),l.Ob(1,"ion-label",2),l.Wb("click",function(){l.hc(o);const n=t.$implicit;return l.Yb().addToFilteredProduct(n)}),l.mc(2),l.Nb(),l.Nb()}if(2&o){const o=t.$implicit;l.Bb(2),l.nc(o.name)}}let d=(()=>{class o{constructor(o){this.productsService=o,this.search="",this.allProducts=[],o.getAllProducts().subscribe(o=>{this.allProducts=o})}ngOnInit(){}onSearchProduct(o){this.search=o.detail.value}addToFilteredProduct(o){this.productsService.filteredProduct.includes(o)||this.productsService.filteredProduct.push(o)}}return o.\u0275fac=function(t){return new(t||o)(l.Lb(s.a))},o.\u0275cmp=l.Fb({type:o,selectors:[["app-search-bar"]],decls:5,vars:4,consts:[["placeholder","buscar","animated","","debounce","500",3,"ionChange"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(o,t){1&o&&(l.Ob(0,"div"),l.Ob(1,"ion-searchbar",0),l.Wb("ionChange",function(o){return t.onSearchProduct(o)}),l.Nb(),l.Ob(2,"ion-list"),l.kc(3,a,3,1,"ion-item",1),l.Zb(4,"productFilter"),l.Nb(),l.Nb()),2&o&&(l.Bb(3),l.ec("ngForOf",l.bc(4,1,t.allProducts,t.search)))},directives:[c.u,c.I,c.p,i.i,c.m,c.o],pipes:[u],styles:["ion-label[_ngcontent-%COMP%]{--color:#3880ff;cursor:pointer}"]}),o})();var m=n("PZxA");function f(o,t){if(1&o){const o=l.Pb();l.Ob(0,"ion-row",26),l.Ob(1,"ion-col",7),l.mc(2),l.Nb(),l.Ob(3,"ion-col",7),l.mc(4),l.Nb(),l.Ob(5,"ion-col",7),l.mc(6),l.Nb(),l.Ob(7,"ion-col",7),l.mc(8),l.Nb(),l.Ob(9,"ion-col",7),l.mc(10),l.Nb(),l.Ob(11,"ion-col",27),l.Ob(12,"ion-button",2),l.Wb("click",function(){l.hc(o);const n=t.$implicit;return l.Yb(2).fillFormToUpdate(n)}),l.Mb(13,"ion-icon",28),l.Nb(),l.Ob(14,"ion-button",29),l.Wb("click",function(){l.hc(o);const n=t.$implicit;return l.Yb(2).onDelete(n.id)}),l.Mb(15,"ion-icon",30),l.Nb(),l.Nb(),l.Nb()}if(2&o){const o=t.$implicit;l.Bb(2),l.nc(o.barCode),l.Bb(2),l.nc(o.name),l.Bb(2),l.nc(o.unitPrice),l.Bb(2),l.nc(o.stock),l.Bb(2),l.nc(o.category)}}function p(o,t){if(1&o&&(l.Ob(0,"div",24),l.kc(1,f,16,5,"ion-row",25),l.Nb()),2&o){const o=l.Yb();l.Bb(1),l.ec("ngForOf",o.allProducts)}}function h(o,t){if(1&o){const o=l.Pb();l.Ob(0,"ion-row",26),l.Ob(1,"ion-col",7),l.mc(2),l.Nb(),l.Ob(3,"ion-col",7),l.mc(4),l.Nb(),l.Ob(5,"ion-col",7),l.mc(6),l.Nb(),l.Ob(7,"ion-col",7),l.mc(8),l.Nb(),l.Ob(9,"ion-col",7),l.mc(10),l.Nb(),l.Ob(11,"ion-col",27),l.Ob(12,"ion-button",2),l.Wb("click",function(){l.hc(o);const n=t.$implicit;return l.Yb(2).fillFormToUpdate(n)}),l.Mb(13,"ion-icon",28),l.Nb(),l.Ob(14,"ion-button",29),l.Wb("click",function(){l.hc(o);const n=t.$implicit;return l.Yb(2).onDelete(n.id)}),l.Mb(15,"ion-icon",30),l.Nb(),l.Nb(),l.Nb()}if(2&o){const o=t.$implicit;l.Bb(2),l.nc(o.barCode),l.Bb(2),l.nc(o.name),l.Bb(2),l.nc(o.unitPrice),l.Bb(2),l.nc(o.stock),l.Bb(2),l.nc(o.category)}}function g(o,t){if(1&o&&(l.Ob(0,"div",24),l.kc(1,h,16,5,"ion-row",25),l.Nb()),2&o){const o=l.Yb();l.Bb(1),l.ec("ngForOf",o.filteredProduct)}}function O(o,t){if(1&o&&(l.Ob(0,"ion-select-option",31),l.mc(1),l.Nb()),2&o){const o=t.$implicit;l.ec("value",o.name),l.Bb(1),l.nc(o.name)}}function N(o,t){if(1&o){const o=l.Pb();l.Ob(0,"ion-button",32),l.Wb("click",function(){return l.hc(o),l.Yb().onUpdate()}),l.Mb(1,"ion-icon",5),l.mc(2," Actualizar "),l.Nb()}}function P(o,t){1&o&&(l.Ob(0,"ion-button",33),l.Mb(1,"ion-icon",5),l.mc(2," Guardar "),l.Nb())}const v=[{path:"",component:(()=>{class o{constructor(o,t,n,i,c){this.formBuilder=o,this.productsService=t,this.menu=n,this.validatorService=i,this.modalCtrl=c,this.allProducts=[],this.isUpdating=!1,this.productId="",this.categorias=[{name:"Pastillas"},{name:"Hierbas"},{name:"Esot\xe9ricos"}],this.form=this.formBuilder.group({name:["",[e.l.required]],barCode:["",[e.l.required,e.l.minLength(3)]],unitPrice:[0,[e.l.required,e.l.min(1),e.l.max(1e3)]],stock:[0,[e.l.required,e.l.min(1),e.l.max(500)]],category:["",[e.l.required]]},{validators:[this.validatorService.codigoExiste("barCode")]}),this.products=this.productsService.getAllProducts(),this.products.subscribe(o=>{this.allProducts=o.sort((o,t)=>o.createdAt>t.createdAt?1:o.createdAt<t.createdAt?-1:0)})}ngOnInit(){this.menu.swipeGesture(!1,"first")}onToggleMenu(){this.menu.enable(!0,"first"),this.menu.open("first")}onAddProduct(){const o=this.form.value;if(o.createdAt=new Date,this.form.invalid)return this.form.markAllAsTouched(),console.log(this.form),void console.log(o);this.productsService.addProduct(o),this.form.reset()}onDelete(o){this.productsService.deleteProduct(o)}fillFormToUpdate(o){const{unitPrice:t,stock:n,barCode:i,category:e,id:c,name:r}=o;this.productId=c,this.form.get("name").setValue(r),this.form.get("barCode").setValue(i),this.form.get("unitPrice").setValue(t),this.form.get("stock").setValue(n),this.form.get("category").setValue(e),this.isUpdating=!0}onCancel(){this.form.reset(),this.isUpdating=!1}onUpdate(){const o=this.form.value;o.id=this.productId,this.productsService.updateProduct(o),this.isUpdating=!1,this.form.reset()}presentModal(){return Object(b.b)(this,void 0,void 0,function*(){const o=yield this.modalCtrl.create({component:d,cssClass:"modal"});return yield o.present()})}showAllProducts(){this.productsService.filteredProduct=[]}get filteredProduct(){return this.productsService.filteredProduct}}return o.\u0275fac=function(t){return new(t||o)(l.Lb(e.a),l.Lb(s.a),l.Lb(c.D),l.Lb(m.a),l.Lb(c.E))},o.\u0275cmp=l.Fb({type:o,selectors:[["app-products"]],decls:64,vars:6,consts:[[1,"ion-no-border"],["slot","start"],[3,"click"],["slot","icon-only","name","menu-outline"],["slot","end"],["slot","start","name","add"],["size","8"],["size","2",1,"ion-text-center"],["class","scroll",4,"ngIf","ngIfElse"],["class","scroll"],["filtered",""],["size","4"],[3,"formGroup","ngSubmit"],["position","floating"],["type","text","formControlName","name"],["type","text","formControlName","barCode"],["type","number","formControlName","unitPrice"],["type","number","formControlName","stock"],["placeholder","Seleccione uno","interface","popover","formControlName","category"],[3,"value",4,"ngFor","ngForOf"],[1,"buttons"],["fill","outline","type","button","color","danger",1,"ion-margin-top",3,"click"],["class","ion-margin-top","fill","outline",3,"click",4,"ngIf"],["class","ion-margin-top","fill","outline","type","submit",4,"ngIf"],[1,"scroll"],["class","row-product",4,"ngFor","ngForOf"],[1,"row-product"],["size","2"],["slot","icon-only","name","sync-outline"],["color","danger",3,"click"],["slot","icon-only","name","trash-outline"],[3,"value"],["fill","outline",1,"ion-margin-top",3,"click"],["fill","outline","type","submit",1,"ion-margin-top"]],template:function(o,t){if(1&o&&(l.Ob(0,"ion-header",0),l.Ob(1,"ion-toolbar"),l.Ob(2,"ion-buttons",1),l.Ob(3,"ion-button",2),l.Wb("click",function(){return t.onToggleMenu()}),l.Mb(4,"ion-icon",3),l.Nb(),l.Nb(),l.Ob(5,"ion-buttons",4),l.Ob(6,"ion-button",2),l.Wb("click",function(){return t.showAllProducts()}),l.mc(7," Mostrar todos "),l.Nb(),l.Ob(8,"ion-button",2),l.Wb("click",function(){return t.presentModal()}),l.Mb(9,"ion-icon",5),l.mc(10," Buscar "),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Ob(11,"ion-content"),l.Ob(12,"ion-grid"),l.Ob(13,"ion-row"),l.Ob(14,"ion-col",6),l.Ob(15,"ion-grid"),l.Ob(16,"ion-row"),l.Ob(17,"ion-col",7),l.Ob(18,"h6"),l.mc(19,"C\xf3digo"),l.Nb(),l.Nb(),l.Ob(20,"ion-col",7),l.Ob(21,"h6"),l.mc(22,"Nombre"),l.Nb(),l.Nb(),l.Ob(23,"ion-col",7),l.Ob(24,"h6"),l.mc(25,"Precio"),l.Nb(),l.Nb(),l.Ob(26,"ion-col",7),l.Ob(27,"h6"),l.mc(28,"Cantidad"),l.Nb(),l.Nb(),l.Ob(29,"ion-col",7),l.Ob(30,"h6"),l.mc(31,"Categor\xeda"),l.Nb(),l.Nb(),l.Nb(),l.kc(32,p,2,1,"div",8),l.kc(33,g,2,1,"ng-template",9,10,l.lc),l.Nb(),l.Nb(),l.Ob(35,"ion-col",11),l.Ob(36,"form",12),l.Wb("ngSubmit",function(){return t.onAddProduct()}),l.Ob(37,"ion-item"),l.Ob(38,"ion-label",13),l.mc(39,"Nombre"),l.Nb(),l.Mb(40,"ion-input",14),l.Nb(),l.Ob(41,"ion-item"),l.Ob(42,"ion-label",13),l.mc(43,"C\xf3digo"),l.Nb(),l.Mb(44,"ion-input",15),l.Nb(),l.Ob(45,"ion-item"),l.Ob(46,"ion-label",13),l.mc(47,"Precio"),l.Nb(),l.Mb(48,"ion-input",16),l.Nb(),l.Ob(49,"ion-item"),l.Ob(50,"ion-label",13),l.mc(51,"Cantidad"),l.Nb(),l.Mb(52,"ion-input",17),l.Nb(),l.Ob(53,"ion-item"),l.Ob(54,"ion-label"),l.mc(55,"Categor\xeda"),l.Nb(),l.Ob(56,"ion-select",18),l.kc(57,O,2,2,"ion-select-option",19),l.Nb(),l.Nb(),l.Ob(58,"div",20),l.Ob(59,"ion-button",21),l.Wb("click",function(){return t.onCancel()}),l.Mb(60,"ion-icon",5),l.mc(61," Cancelar "),l.Nb(),l.kc(62,N,3,0,"ion-button",22),l.kc(63,P,3,0,"ion-button",23),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb()),2&o){const o=l.gc(34);l.Bb(32),l.ec("ngIf",0===t.filteredProduct.length)("ngIfElse",o),l.Bb(4),l.ec("formGroup",t.form),l.Bb(21),l.ec("ngForOf",t.categorias),l.Bb(5),l.ec("ngIf",t.isUpdating),l.Bb(1),l.ec("ngIf",!t.isUpdating)}},directives:[c.j,c.A,c.e,c.d,c.k,c.g,c.i,c.t,c.f,i.j,e.m,e.h,e.c,c.m,c.o,c.l,c.I,e.g,e.b,c.F,c.v,c.H,i.i,c.w],styles:["ion-row[_ngcontent-%COMP%]{border-bottom:1px solid #000}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}form[_ngcontent-%COMP%]   div.buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.row-product[_ngcontent-%COMP%]:nth-child(odd){background-color:#c7c7c7}.row-product[_ngcontent-%COMP%]:hover{background-color:#949494;color:#000}.scroll[_ngcontent-%COMP%]{height:400px;overflow-y:scroll}"]}),o})()}];let k=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=l.Jb({type:o}),o.\u0275inj=l.Ib({imports:[[r.j.forChild(v)],r.j]}),o})(),C=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=l.Jb({type:o}),o.\u0275inj=l.Ib({imports:[[i.c,e.k,c.B,k]]}),o})()}}]);