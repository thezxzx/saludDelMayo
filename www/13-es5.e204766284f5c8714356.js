!function(){function o(o,n){if(!(o instanceof n))throw new TypeError("Cannot call a class as a function")}function n(o,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(o,i.key,i)}}function t(o,t,i){return t&&n(o.prototype,t),i&&n(o,i),o}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{szOk:function(n,i,e){"use strict";e.r(i),e.d(i,"ProductsPageModule",function(){return I});var r,c=e("ofXK"),b=e("3Pt+"),l=e("TEn/"),u=e("tyNb"),a=e("mrSG"),s=e("fXoL"),d=e("8z/i"),f=((r=function(){function n(){o(this,n)}return t(n,[{key:"transform",value:function(o,n){if(""!==n)return n=n.toLowerCase(),o.filter(function(o){return o.name.toLowerCase().includes(n)})}}]),n}()).\u0275fac=function(o){return new(o||r)},r.\u0275pipe=s.Kb({name:"productFilter",type:r,pure:!0}),r);function m(o,n){if(1&o){var t=s.Pb();s.Ob(0,"ion-item"),s.Ob(1,"ion-label",2),s.Wb("click",function(){s.hc(t);var o=n.$implicit;return s.Yb().addToFilteredProduct(o)}),s.mc(2),s.Nb(),s.Nb()}if(2&o){var i=n.$implicit;s.Bb(2),s.nc(i.name)}}var p,h=((p=function(){function n(t){var i=this;o(this,n),this.productsService=t,this.search="",this.allProducts=[],t.getAllProducts().subscribe(function(o){i.allProducts=o})}return t(n,[{key:"ngOnInit",value:function(){}},{key:"onSearchProduct",value:function(o){this.search=o.detail.value}},{key:"addToFilteredProduct",value:function(o){this.productsService.filteredProduct.includes(o)||this.productsService.filteredProduct.push(o)}}]),n}()).\u0275fac=function(o){return new(o||p)(s.Lb(d.a))},p.\u0275cmp=s.Fb({type:p,selectors:[["app-search-bar"]],decls:5,vars:4,consts:[["placeholder","buscar","animated","","debounce","500",3,"ionChange"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(o,n){1&o&&(s.Ob(0,"div"),s.Ob(1,"ion-searchbar",0),s.Wb("ionChange",function(o){return n.onSearchProduct(o)}),s.Nb(),s.Ob(2,"ion-list"),s.kc(3,m,3,1,"ion-item",1),s.Zb(4,"productFilter"),s.Nb(),s.Nb()),2&o&&(s.Bb(3),s.ec("ngForOf",s.bc(4,1,n.allProducts,n.search)))},directives:[l.u,l.I,l.p,c.i,l.m,l.o],pipes:[f],styles:["ion-label[_ngcontent-%COMP%]{--color:#3880ff;cursor:pointer}"]}),p),g=e("PZxA");function O(o,n){if(1&o){var t=s.Pb();s.Ob(0,"ion-row",26),s.Ob(1,"ion-col",7),s.mc(2),s.Nb(),s.Ob(3,"ion-col",7),s.mc(4),s.Nb(),s.Ob(5,"ion-col",7),s.mc(6),s.Nb(),s.Ob(7,"ion-col",7),s.mc(8),s.Nb(),s.Ob(9,"ion-col",7),s.mc(10),s.Nb(),s.Ob(11,"ion-col",27),s.Ob(12,"ion-button",2),s.Wb("click",function(){s.hc(t);var o=n.$implicit;return s.Yb(2).fillFormToUpdate(o)}),s.Mb(13,"ion-icon",28),s.Nb(),s.Ob(14,"ion-button",29),s.Wb("click",function(){s.hc(t);var o=n.$implicit;return s.Yb(2).onDelete(o.id)}),s.Mb(15,"ion-icon",30),s.Nb(),s.Nb(),s.Nb()}if(2&o){var i=n.$implicit;s.Bb(2),s.nc(i.barCode),s.Bb(2),s.nc(i.name),s.Bb(2),s.nc(i.unitPrice),s.Bb(2),s.nc(i.stock),s.Bb(2),s.nc(i.category)}}function v(o,n){if(1&o&&(s.Ob(0,"div",24),s.kc(1,O,16,5,"ion-row",25),s.Nb()),2&o){var t=s.Yb();s.Bb(1),s.ec("ngForOf",t.allProducts)}}function N(o,n){if(1&o){var t=s.Pb();s.Ob(0,"ion-row",26),s.Ob(1,"ion-col",7),s.mc(2),s.Nb(),s.Ob(3,"ion-col",7),s.mc(4),s.Nb(),s.Ob(5,"ion-col",7),s.mc(6),s.Nb(),s.Ob(7,"ion-col",7),s.mc(8),s.Nb(),s.Ob(9,"ion-col",7),s.mc(10),s.Nb(),s.Ob(11,"ion-col",27),s.Ob(12,"ion-button",2),s.Wb("click",function(){s.hc(t);var o=n.$implicit;return s.Yb(2).fillFormToUpdate(o)}),s.Mb(13,"ion-icon",28),s.Nb(),s.Ob(14,"ion-button",29),s.Wb("click",function(){s.hc(t);var o=n.$implicit;return s.Yb(2).onDelete(o.id)}),s.Mb(15,"ion-icon",30),s.Nb(),s.Nb(),s.Nb()}if(2&o){var i=n.$implicit;s.Bb(2),s.nc(i.barCode),s.Bb(2),s.nc(i.name),s.Bb(2),s.nc(i.unitPrice),s.Bb(2),s.nc(i.stock),s.Bb(2),s.nc(i.category)}}function k(o,n){if(1&o&&(s.Ob(0,"div",24),s.kc(1,N,16,5,"ion-row",25),s.Nb()),2&o){var t=s.Yb();s.Bb(1),s.ec("ngForOf",t.filteredProduct)}}function P(o,n){if(1&o&&(s.Ob(0,"ion-select-option",31),s.mc(1),s.Nb()),2&o){var t=n.$implicit;s.ec("value",t.name),s.Bb(1),s.nc(t.name)}}function y(o,n){if(1&o){var t=s.Pb();s.Ob(0,"ion-button",32),s.Wb("click",function(){return s.hc(t),s.Yb().onUpdate()}),s.Mb(1,"ion-icon",5),s.mc(2," Actualizar "),s.Nb()}}function C(o,n){1&o&&(s.Ob(0,"ion-button",33),s.Mb(1,"ion-icon",5),s.mc(2," Guardar "),s.Nb())}var w,M,B,F=[{path:"",component:(w=function(){function n(t,i,e,r,c){var l=this;o(this,n),this.formBuilder=t,this.productsService=i,this.menu=e,this.validatorService=r,this.modalCtrl=c,this.allProducts=[],this.isUpdating=!1,this.productId="",this.categorias=[{name:"Pastillas"},{name:"Hierbas"},{name:"Esot\xe9ricos"}],this.form=this.formBuilder.group({name:["",[b.l.required]],barCode:["",[b.l.required,b.l.minLength(3)]],unitPrice:[0,[b.l.required,b.l.min(1),b.l.max(1e3)]],stock:[0,[b.l.required,b.l.min(1),b.l.max(500)]],category:["",[b.l.required]]},{validators:[this.validatorService.codigoExiste("barCode")]}),this.products=this.productsService.getAllProducts(),this.products.subscribe(function(o){l.allProducts=o.sort(function(o,n){return o.createdAt>n.createdAt?1:o.createdAt<n.createdAt?-1:0})})}return t(n,[{key:"ngOnInit",value:function(){this.menu.swipeGesture(!1,"first")}},{key:"onToggleMenu",value:function(){this.menu.enable(!0,"first"),this.menu.open("first")}},{key:"onAddProduct",value:function(){var o=this.form.value;if(o.createdAt=new Date,this.form.invalid)return this.form.markAllAsTouched(),console.log(this.form),void console.log(o);this.productsService.addProduct(o),this.form.reset()}},{key:"onDelete",value:function(o){this.productsService.deleteProduct(o)}},{key:"fillFormToUpdate",value:function(o){var n=o.unitPrice,t=o.stock,i=o.barCode,e=o.category,r=o.id,c=o.name;this.productId=r,this.form.get("name").setValue(c),this.form.get("barCode").setValue(i),this.form.get("unitPrice").setValue(n),this.form.get("stock").setValue(t),this.form.get("category").setValue(e),this.isUpdating=!0}},{key:"onCancel",value:function(){this.form.reset(),this.isUpdating=!1}},{key:"onUpdate",value:function(){var o=this.form.value;o.id=this.productId,this.productsService.updateProduct(o),this.isUpdating=!1,this.form.reset()}},{key:"presentModal",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark(function o(){var n;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.modalCtrl.create({component:h,cssClass:"modal"});case 2:return n=o.sent,o.next=5,n.present();case 5:return o.abrupt("return",o.sent);case 6:case"end":return o.stop()}},o,this)}))}},{key:"showAllProducts",value:function(){this.productsService.filteredProduct=[]}},{key:"filteredProduct",get:function(){return this.productsService.filteredProduct}}]),n}(),w.\u0275fac=function(o){return new(o||w)(s.Lb(b.a),s.Lb(d.a),s.Lb(l.D),s.Lb(g.a),s.Lb(l.E))},w.\u0275cmp=s.Fb({type:w,selectors:[["app-products"]],decls:64,vars:6,consts:[[1,"ion-no-border"],["slot","start"],[3,"click"],["slot","icon-only","name","menu-outline"],["slot","end"],["slot","start","name","add"],["size","8"],["size","2",1,"ion-text-center"],["class","scroll",4,"ngIf","ngIfElse"],["class","scroll"],["filtered",""],["size","4"],[3,"formGroup","ngSubmit"],["position","floating"],["type","text","formControlName","name"],["type","text","formControlName","barCode"],["type","number","formControlName","unitPrice"],["type","number","formControlName","stock"],["placeholder","Seleccione uno","interface","popover","formControlName","category"],[3,"value",4,"ngFor","ngForOf"],[1,"buttons"],["fill","outline","type","button","color","danger",1,"ion-margin-top",3,"click"],["class","ion-margin-top","fill","outline",3,"click",4,"ngIf"],["class","ion-margin-top","fill","outline","type","submit",4,"ngIf"],[1,"scroll"],["class","row-product",4,"ngFor","ngForOf"],[1,"row-product"],["size","2"],["slot","icon-only","name","sync-outline"],["color","danger",3,"click"],["slot","icon-only","name","trash-outline"],[3,"value"],["fill","outline",1,"ion-margin-top",3,"click"],["fill","outline","type","submit",1,"ion-margin-top"]],template:function(o,n){if(1&o&&(s.Ob(0,"ion-header",0),s.Ob(1,"ion-toolbar"),s.Ob(2,"ion-buttons",1),s.Ob(3,"ion-button",2),s.Wb("click",function(){return n.onToggleMenu()}),s.Mb(4,"ion-icon",3),s.Nb(),s.Nb(),s.Ob(5,"ion-buttons",4),s.Ob(6,"ion-button",2),s.Wb("click",function(){return n.showAllProducts()}),s.mc(7," Mostrar todos "),s.Nb(),s.Ob(8,"ion-button",2),s.Wb("click",function(){return n.presentModal()}),s.Mb(9,"ion-icon",5),s.mc(10," Buscar "),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(11,"ion-content"),s.Ob(12,"ion-grid"),s.Ob(13,"ion-row"),s.Ob(14,"ion-col",6),s.Ob(15,"ion-grid"),s.Ob(16,"ion-row"),s.Ob(17,"ion-col",7),s.Ob(18,"h6"),s.mc(19,"C\xf3digo"),s.Nb(),s.Nb(),s.Ob(20,"ion-col",7),s.Ob(21,"h6"),s.mc(22,"Nombre"),s.Nb(),s.Nb(),s.Ob(23,"ion-col",7),s.Ob(24,"h6"),s.mc(25,"Precio"),s.Nb(),s.Nb(),s.Ob(26,"ion-col",7),s.Ob(27,"h6"),s.mc(28,"Cantidad"),s.Nb(),s.Nb(),s.Ob(29,"ion-col",7),s.Ob(30,"h6"),s.mc(31,"Categor\xeda"),s.Nb(),s.Nb(),s.Nb(),s.kc(32,v,2,1,"div",8),s.kc(33,k,2,1,"ng-template",9,10,s.lc),s.Nb(),s.Nb(),s.Ob(35,"ion-col",11),s.Ob(36,"form",12),s.Wb("ngSubmit",function(){return n.onAddProduct()}),s.Ob(37,"ion-item"),s.Ob(38,"ion-label",13),s.mc(39,"Nombre"),s.Nb(),s.Mb(40,"ion-input",14),s.Nb(),s.Ob(41,"ion-item"),s.Ob(42,"ion-label",13),s.mc(43,"C\xf3digo"),s.Nb(),s.Mb(44,"ion-input",15),s.Nb(),s.Ob(45,"ion-item"),s.Ob(46,"ion-label",13),s.mc(47,"Precio"),s.Nb(),s.Mb(48,"ion-input",16),s.Nb(),s.Ob(49,"ion-item"),s.Ob(50,"ion-label",13),s.mc(51,"Cantidad"),s.Nb(),s.Mb(52,"ion-input",17),s.Nb(),s.Ob(53,"ion-item"),s.Ob(54,"ion-label"),s.mc(55,"Categor\xeda"),s.Nb(),s.Ob(56,"ion-select",18),s.kc(57,P,2,2,"ion-select-option",19),s.Nb(),s.Nb(),s.Ob(58,"div",20),s.Ob(59,"ion-button",21),s.Wb("click",function(){return n.onCancel()}),s.Mb(60,"ion-icon",5),s.mc(61," Cancelar "),s.Nb(),s.kc(62,y,3,0,"ion-button",22),s.kc(63,C,3,0,"ion-button",23),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb()),2&o){var t=s.gc(34);s.Bb(32),s.ec("ngIf",0===n.filteredProduct.length)("ngIfElse",t),s.Bb(4),s.ec("formGroup",n.form),s.Bb(21),s.ec("ngForOf",n.categorias),s.Bb(5),s.ec("ngIf",n.isUpdating),s.Bb(1),s.ec("ngIf",!n.isUpdating)}},directives:[l.j,l.A,l.e,l.d,l.k,l.g,l.i,l.t,l.f,c.j,b.m,b.h,b.c,l.m,l.o,l.l,l.I,b.g,b.b,l.F,l.v,l.H,c.i,l.w],styles:["ion-row[_ngcontent-%COMP%]{border-bottom:1px solid #000}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}form[_ngcontent-%COMP%]   div.buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.row-product[_ngcontent-%COMP%]:nth-child(odd){background-color:#c7c7c7}.row-product[_ngcontent-%COMP%]:hover{background-color:#949494;color:#000}.scroll[_ngcontent-%COMP%]{height:400px;overflow-y:scroll}"]}),w)}],S=((B=function n(){o(this,n)}).\u0275fac=function(o){return new(o||B)},B.\u0275mod=s.Jb({type:B}),B.\u0275inj=s.Ib({imports:[[u.j.forChild(F)],u.j]}),B),I=((M=function n(){o(this,n)}).\u0275fac=function(o){return new(o||M)},M.\u0275mod=s.Jb({type:M}),M.\u0275inj=s.Ib({imports:[[c.c,b.k,l.B,S]]}),M)}}])}();