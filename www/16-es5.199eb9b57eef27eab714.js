!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function o(e,o,t){return o&&n(e.prototype,o),t&&n(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{MP20:function(n,t,i){"use strict";i.r(t),i.d(t,"UsersPageModule",function(){return w});var r,c=i("ofXK"),s=i("3Pt+"),l=i("TEn/"),u=i("tyNb"),a=i("fXoL"),b=i("mrSG"),f=i("lJxs"),m=i("I/3d"),p=i("UbJi"),d=((r=function(){function n(o,t){e(this,n),this.af=o,this.afa=t,this.usersCollection=this.af.collection("users"),this.users=this.usersCollection.snapshotChanges().pipe(Object(f.a)(function(e){return e.map(function(e){var n=e.payload.doc.data();return n.id=e.payload.doc.id,n})}))}return o(n,[{key:"getAllUsers",value:function(){try{return this.users}catch(e){console.log(e)}}},{key:"updateUser",value:function(e){return Object(b.b)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:try{o=e.id,this.af.collection("users").doc(o).update(e)}catch(t){console.log(t)}case 1:case"end":return n.stop()}},n,this)}))}},{key:"deleteUser",value:function(e){return Object(b.b)(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.af.collection("users").doc(e).delete();case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),console.log(n.t0);case 8:case"end":return n.stop()}},n,this,[[0,5]])}))}}]),n}()).\u0275fac=function(e){return new(e||r)(a.Sb(m.a),a.Sb(p.a))},r.\u0275prov=a.Hb({token:r,factory:r.\u0275fac,providedIn:"root"}),r);function h(e,n){if(1&e){var o=a.Pb();a.Ob(0,"ion-row"),a.Ob(1,"ion-col",6),a.mc(2),a.Zb(3,"titlecase"),a.Nb(),a.Ob(4,"ion-col",6),a.mc(5),a.Zb(6,"titlecase"),a.Nb(),a.Ob(7,"ion-col",6),a.mc(8),a.Nb(),a.Ob(9,"ion-col",6),a.mc(10),a.Nb(),a.Ob(11,"ion-col",16),a.Ob(12,"ion-button",2),a.Wb("click",function(){a.hc(o);var e=n.$implicit;return a.Yb().getUserRole(e)}),a.Mb(13,"ion-icon",17),a.Nb(),a.Ob(14,"ion-button",18),a.Wb("click",function(){a.hc(o);var e=n.$implicit;return a.Yb().onDeleteUser(e.id)}),a.Mb(15,"ion-icon",19),a.Nb(),a.Nb(),a.Nb()}if(2&e){var t=n.$implicit;a.Bb(2),a.nc(a.ac(3,4,t.name)),a.Bb(3),a.nc(a.ac(6,6,t.lastName)),a.Bb(3),a.nc(t.phone),a.Bb(2),a.nc(t.role)}}function v(e,n){if(1&e&&(a.Ob(0,"ion-select-option",20),a.mc(1),a.Nb()),2&e){var o=n.$implicit;a.ec("value",o.name),a.Bb(1),a.oc(" ",o.name," ")}}var O,g,N,y=[{path:"",component:(O=function(){function n(o,t,i){var r=this;e(this,n),this.menu=o,this.formBuilder=t,this.userService=i,this.roles=[{name:"Administrador"},{name:"Gerente"},{name:"Empleado"}],this.allUsers=[],this.form=this.formBuilder.group({role:["",[s.l.required]]}),this.users=this.userService.getAllUsers(),this.users.subscribe(function(e){console.log(e),r.allUsers=e.filter(function(e){return"Administrador"!==e.role})})}return o(n,[{key:"ngOnInit",value:function(){this.menu.swipeGesture(!1,"first")}},{key:"getUserRole",value:function(e){this.updateUser=e,this.form.get("role").setValue(e.role)}},{key:"onUpdateRole",value:function(){this.form.invalid||(this.updateUser.role=this.form.get("role").value,this.userService.updateUser(this.updateUser))}},{key:"onDeleteUser",value:function(e){this.userService.deleteUser(e)}},{key:"onToggleMenu",value:function(){this.menu.enable(!0,"first"),this.menu.open("first")}}]),n}(),O.\u0275fac=function(e){return new(e||O)(a.Lb(l.D),a.Lb(s.a),a.Lb(d))},O.\u0275cmp=a.Fb({type:O,selectors:[["app-users"]],decls:40,vars:4,consts:[[1,"ion-no-border",3,"translucent"],["slot","start"],[3,"click"],["slot","icon-only","name","menu-outline"],[1,"ion-text-center"],["size","8"],["size","2",1,"ion-text-center"],[4,"ngFor","ngForOf"],["size","4"],[3,"formGroup","ngSubmit"],["placeholder","Seleccione uno","interface","popover","formControlName","role"],[3,"value",4,"ngFor","ngForOf"],[1,"buttons"],["fill","outline","type","button","color","danger",1,"ion-margin-top"],["slot","start","name","add"],["fill","outline",1,"ion-margin-top",3,"click"],["size","2"],["slot","icon-only","name","sync-outline"],["color","danger",3,"click"],["slot","icon-only","name","trash-outline"],[3,"value"]],template:function(e,n){1&e&&(a.Ob(0,"ion-header",0),a.Ob(1,"ion-toolbar"),a.Ob(2,"ion-buttons",1),a.Ob(3,"ion-button",2),a.Wb("click",function(){return n.onToggleMenu()}),a.Mb(4,"ion-icon",3),a.Nb(),a.Nb(),a.Ob(5,"ion-title",4),a.mc(6," Usuarios "),a.Nb(),a.Nb(),a.Nb(),a.Ob(7,"ion-content"),a.Ob(8,"ion-grid"),a.Ob(9,"ion-row"),a.Ob(10,"ion-col",5),a.Ob(11,"ion-grid"),a.Ob(12,"ion-row"),a.Ob(13,"ion-col",6),a.Ob(14,"h6"),a.mc(15,"Nombre"),a.Nb(),a.Nb(),a.Ob(16,"ion-col",6),a.Ob(17,"h6"),a.mc(18,"Apellido"),a.Nb(),a.Nb(),a.Ob(19,"ion-col",6),a.Ob(20,"h6"),a.mc(21,"Tel\xe9fono"),a.Nb(),a.Nb(),a.Ob(22,"ion-col",6),a.Ob(23,"h6"),a.mc(24,"Rol"),a.Nb(),a.Nb(),a.Nb(),a.kc(25,h,16,8,"ion-row",7),a.Nb(),a.Nb(),a.Ob(26,"ion-col",8),a.Ob(27,"form",9),a.Wb("ngSubmit",function(){return n.onUpdateRole()}),a.Ob(28,"ion-item"),a.Ob(29,"ion-label"),a.mc(30,"Puesto:"),a.Nb(),a.Ob(31,"ion-select",10),a.kc(32,v,2,2,"ion-select-option",11),a.Nb(),a.Nb(),a.Ob(33,"div",12),a.Ob(34,"ion-button",13),a.Mb(35,"ion-icon",14),a.mc(36," Cancelar "),a.Nb(),a.Ob(37,"ion-button",15),a.Wb("click",function(){return n.onUpdateRole()}),a.Mb(38,"ion-icon",14),a.mc(39," Actualizar "),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb()),2&e&&(a.ec("translucent",!0),a.Bb(25),a.ec("ngForOf",n.allUsers),a.Bb(2),a.ec("formGroup",n.form),a.Bb(5),a.ec("ngForOf",n.roles))},directives:[l.j,l.A,l.e,l.d,l.k,l.y,l.g,l.i,l.t,l.f,c.i,s.m,s.h,s.c,l.m,l.o,l.v,l.H,s.g,s.b,l.w],pipes:[c.m],styles:[""]}),O)}],k=((N=function n(){e(this,n)}).\u0275fac=function(e){return new(e||N)},N.\u0275mod=a.Jb({type:N}),N.\u0275inj=a.Ib({imports:[[u.j.forChild(y)],u.j]}),N),w=((g=function n(){e(this,n)}).\u0275fac=function(e){return new(e||g)},g.\u0275mod=a.Jb({type:g}),g.\u0275inj=a.Ib({imports:[[c.c,s.k,l.B,k]]}),g)}}])}();