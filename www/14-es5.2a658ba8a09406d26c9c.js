!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var o=0;o<n.length;o++){var r=n[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,o,r){return o&&n(e.prototype,o),r&&n(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{qz0O:function(n,r,t){"use strict";t.r(r),t.d(r,"ProvidersPageModule",function(){return j});var i,a=t("ofXK"),c=t("3Pt+"),l=t("TEn/"),s=t("tyNb"),u=t("mrSG"),b=t("fXoL"),m=t("lJxs"),d=t("I/3d"),p=((i=function(){function n(o){e(this,n),this.af=o,this.providersCollection=this.af.collection("providers"),this.providers=this.providersCollection.snapshotChanges().pipe(Object(m.a)(function(e){return e.map(function(e){var n=e.payload.doc.data();return n.id=e.payload.doc.id,n})}))}return o(n,[{key:"getAllProviders",value:function(){try{return this.providers}catch(e){console.log("Error en la l\xednea 25 provider.Service",e)}}},{key:"addProvider",value:function(e){return Object(u.b)(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.af.collection("providers").add(e);case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),console.log("Error en la l\xednea 25 provider.Service",n.t0);case 8:case"end":return n.stop()}},n,this,[[0,5]])}))}},{key:"deleteProvider",value:function(e){return Object(u.b)(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.af.collection("providers").doc(e).delete();case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),console.log("Error en la l\xednea 35 provider.Service",n.t0);case 8:case"end":return n.stop()}},n,this,[[0,5]])}))}},{key:"updateProvider",value:function(e){return Object(u.b)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:try{o=e.id,this.af.collection("providers").doc(o).update(e)}catch(r){console.log("Error en la l\xednea 44 provider.Service",r)}case 1:case"end":return n.stop()}},n,this)}))}}]),n}()).\u0275fac=function(e){return new(e||i)(b.Sb(d.a))},i.\u0275prov=b.Hb({token:i,factory:i.\u0275fac,providedIn:"root"}),i);function v(e,n){if(1&e&&(b.Ob(0,"ion-item",11),b.Ob(1,"ion-label"),b.mc(2),b.Nb(),b.Nb()),2&e){var o=b.Yb();b.Bb(2),b.nc(o.nameProviderErrorMsg)}}function f(e,n){if(1&e&&(b.Ob(0,"ion-item",11),b.Ob(1,"ion-label"),b.mc(2),b.Nb(),b.Nb()),2&e){var o=b.Yb();b.Bb(2),b.nc(o.nameCompanyErrorMsg)}}function h(e,n){if(1&e&&(b.Ob(0,"ion-select-option",12),b.mc(1),b.Nb()),2&e){var o=n.$implicit;b.ec("value",o.name),b.Bb(1),b.nc(o.name)}}function g(e,n){if(1&e&&(b.Ob(0,"ion-item",11),b.Ob(1,"ion-label"),b.mc(2),b.Nb(),b.Nb()),2&e){var o=b.Yb();b.Bb(2),b.nc(o.categoryErrorMsg)}}function O(e,n){if(1&e&&(b.Ob(0,"ion-item",11),b.Ob(1,"ion-label"),b.mc(2),b.Nb(),b.Nb()),2&e){var o=b.Yb();b.Bb(2),b.nc(o.telephoneErrorMsg)}}function N(e,n){if(1&e&&(b.Ob(0,"ion-item",11),b.Ob(1,"ion-label"),b.mc(2),b.Nb(),b.Nb()),2&e){var o=b.Yb();b.Bb(2),b.nc(o.emailErrorMsg)}}function y(e,n){1&e&&(b.Ob(0,"div"),b.Ob(1,"ion-button",13),b.mc(2," A\xf1adir "),b.Nb(),b.Nb())}function k(e,n){if(1&e){var o=b.Pb();b.Ob(0,"div"),b.Ob(1,"ion-button",14),b.Wb("click",function(){return b.hc(o),b.Yb().onUpdate()}),b.mc(2," Actualizar "),b.Nb(),b.Nb()}}var C,P=((C=function(){function n(o,r){e(this,n),this.formBuilder=o,this.providerService=r,this.namePattern="[a-zA-Z ]{3,50}",this.emailPattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",this.categorias=[{name:"Pastillas"},{name:"Hierbas"},{name:"Esot\xe9ricos"}],this.form=this.formBuilder.group({nameProvider:["",[c.l.required,c.l.minLength(3),c.l.pattern(this.namePattern)]],nameCompany:["",[c.l.required,c.l.minLength(3)]],category:["",[c.l.required]],telephone:["",[c.l.required]],email:["",[c.l.required,c.l.pattern(this.emailPattern)]]})}return o(n,[{key:"campoNoValido",value:function(e){var n,o;return(null===(n=this.form.get(e))||void 0===n?void 0:n.invalid)&&(null===(o=this.form.get(e))||void 0===o?void 0:o.touched)}},{key:"nameProviderErrorMsg",get:function(){var e,n=null===(e=this.form.get("nameProvider"))||void 0===e?void 0:e.errors;return(null==n?void 0:n.required)?"El campo es obligatorio.":(null==n?void 0:n.minlength)?"Debe contener m\xednimo 3 caracteres.":(null==n?void 0:n.pattern)?"El nombre no es v\xe1lido.":""}},{key:"nameCompanyErrorMsg",get:function(){var e,n=null===(e=this.form.get("nameCompany"))||void 0===e?void 0:e.errors;return(null==n?void 0:n.required)?"El campo es obligatorio.":(null==n?void 0:n.minlength)?"Debe contener m\xednimo 3 caracteres.":""}},{key:"categoryErrorMsg",get:function(){var e,n=null===(e=this.form.get("category"))||void 0===e?void 0:e.errors;return(null==n?void 0:n.required)?"El campo es obligatorio.":""}},{key:"telephoneErrorMsg",get:function(){var e,n=null===(e=this.form.get("telephone"))||void 0===e?void 0:e.errors;return(null==n?void 0:n.required)?"El campo es obligatorio.":(null==n?void 0:n.pattern)?"El tel\xe9fono no tiene un formato correcto.":""}},{key:"emailErrorMsg",get:function(){var e,n=null===(e=this.form.get("email"))||void 0===e?void 0:e.errors;return(null==n?void 0:n.required)?"El campo es obligatorio.":(null==n?void 0:n.pattern)?"El correo no tiene un formato correcto.":""}},{key:"onAddProvider",value:function(){console.log(this.form.getError("telephone")),this.form.invalid?this.form.markAllAsTouched():this.providerService.addProvider(this.form.value)}},{key:"onUpdate",value:function(){var e=this.form.value;e.id=this.providerId,this.providerService.updateProvider(e),this.name="",this.form.reset()}},{key:"ngOnInit",value:function(){this.name&&(this.form.get("nameProvider").setValue(this.name),this.form.get("nameCompany").setValue(this.nameCompany),this.form.get("category").setValue(this.category),this.form.get("telephone").setValue(this.telephone),this.form.get("email").setValue(this.email))}}]),n}()).\u0275fac=function(e){return new(e||C)(b.Lb(c.a),b.Lb(p))},C.\u0275cmp=b.Fb({type:C,selectors:[["app-modal"]],inputs:{name:"name",nameCompany:"nameCompany",category:"category",telephone:"telephone",email:"email",providerId:"providerId"},decls:37,vars:9,consts:[[3,"formGroup","ngSubmit"],["position","floating"],["color","danger"],["type","text","formControlName","nameProvider"],["class","error",4,"ngIf"],["type","text","formControlName","nameCompany"],["placeholder","Categor\xeda","interface","popover","formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["type","tel","pattern","(\\(\\d{3}\\)[.-]?|\\d{3}[.-]?)?\\d{3}[.-]?\\d{4}","formControlName","telephone"],["type","email","formControlName","email"],[4,"ngIf"],[1,"error"],[3,"value"],["type","submit","color","success","expand","block","fill","outline","shape","round",1,"ion-margin-top"],["color","success","expand","block","fill","outline","shape","round",1,"ion-margin-top",3,"click"]],template:function(e,n){1&e&&(b.Ob(0,"div"),b.Ob(1,"form",0),b.Wb("ngSubmit",function(){return n.onAddProvider()}),b.Ob(2,"ion-list"),b.Ob(3,"ion-item"),b.Ob(4,"ion-label",1),b.mc(5,"Nombre Proveedor"),b.Ob(6,"ion-text",2),b.mc(7,"*"),b.Nb(),b.Nb(),b.Mb(8,"ion-input",3),b.Nb(),b.kc(9,v,3,1,"ion-item",4),b.Ob(10,"ion-item"),b.Ob(11,"ion-label",1),b.mc(12,"Nombre compa\xf1ia"),b.Ob(13,"ion-text",2),b.mc(14,"*"),b.Nb(),b.Nb(),b.Mb(15,"ion-input",5),b.Nb(),b.kc(16,f,3,1,"ion-item",4),b.Ob(17,"ion-item"),b.Ob(18,"ion-select",6),b.kc(19,h,2,2,"ion-select-option",7),b.Nb(),b.Nb(),b.kc(20,g,3,1,"ion-item",4),b.Ob(21,"ion-item"),b.Ob(22,"ion-label",1),b.mc(23,"Celular"),b.Ob(24,"ion-text",2),b.mc(25,"*"),b.Nb(),b.Nb(),b.Mb(26,"ion-input",8),b.Nb(),b.kc(27,O,3,1,"ion-item",4),b.Ob(28,"ion-item"),b.Ob(29,"ion-label",1),b.mc(30,"Correo"),b.Ob(31,"ion-text",2),b.mc(32,"*"),b.Nb(),b.Nb(),b.Mb(33,"ion-input",9),b.Nb(),b.kc(34,N,3,1,"ion-item",4),b.kc(35,y,3,0,"div",10),b.kc(36,k,3,0,"div",10),b.Nb(),b.Nb(),b.Nb()),2&e&&(b.Bb(1),b.ec("formGroup",n.form),b.Bb(8),b.ec("ngIf",n.campoNoValido("nameProvider")),b.Bb(7),b.ec("ngIf",n.campoNoValido("nameCompany")),b.Bb(3),b.ec("ngForOf",n.categorias),b.Bb(1),b.ec("ngIf",n.campoNoValido("category")),b.Bb(7),b.ec("ngIf",n.campoNoValido("telephone")),b.Bb(7),b.ec("ngIf",n.campoNoValido("email")),b.Bb(1),b.ec("ngIf",!n.name),b.Bb(1),b.ec("ngIf",n.name))},directives:[c.m,c.h,c.c,l.p,l.m,l.o,l.x,l.l,l.I,c.g,c.b,a.j,l.v,l.H,a.i,c.j,l.w,l.d],styles:["div[_ngcontent-%COMP%]{display:flex;justify-content:center}.error[_ngcontent-%COMP%]{--border-style:none;color:red}"]}),C);function x(e,n){if(1&e){var o=b.Pb();b.Ob(0,"ion-row"),b.Ob(1,"ion-col",9),b.Ob(2,"p"),b.mc(3),b.Nb(),b.Nb(),b.Ob(4,"ion-col",10),b.Ob(5,"p"),b.mc(6),b.Nb(),b.Nb(),b.Ob(7,"ion-col",11),b.Ob(8,"p"),b.mc(9),b.Nb(),b.Nb(),b.Ob(10,"ion-col",10),b.Ob(11,"p"),b.mc(12),b.Nb(),b.Nb(),b.Ob(13,"ion-col",10),b.Ob(14,"p"),b.mc(15),b.Nb(),b.Nb(),b.Ob(16,"ion-col",13),b.Ob(17,"ion-button",14),b.Wb("click",function(){b.hc(o);var e=n.$implicit;return b.Yb().onDelete(e.id)}),b.Mb(18,"ion-icon",15),b.Nb(),b.Ob(19,"ion-button",16),b.Wb("click",function(){b.hc(o);var e=n.$implicit;return b.Yb().presentModalProps(e)}),b.Mb(20,"ion-icon",17),b.Nb(),b.Nb(),b.Nb()}if(2&e){var r=n.$implicit;b.Bb(3),b.nc(r.nameProvider),b.Bb(3),b.nc(r.nameCompany),b.Bb(3),b.nc(r.category),b.Bb(3),b.nc(r.telephone),b.Bb(3),b.nc(r.email)}}var w,E,M,B=[{path:"",component:(w=function(){function n(o,r,t,i){var a=this;e(this,n),this.menu=o,this.modalCtrl=r,this.providerService=t,this.alerCtrl=i,this.allProviders=[],this.providers=this.providerService.getAllProviders(),this.providers.subscribe(function(e){a.allProviders=e.sort(function(e,n){return e.nameCompany>n.nameCompany?1:e.nameCompany<n.nameCompany?-1:0})})}return o(n,[{key:"ngOnInit",value:function(){this.menu.swipeGesture(!1,"first")}},{key:"onToggleMenu",value:function(){this.menu.enable(!0,"first"),this.menu.open("first")}},{key:"onDelete",value:function(e){return Object(u.b)(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.presentAlert(e);case 2:case"end":return n.stop()}},n,this)}))}},{key:"presentModal",value:function(){return Object(u.b)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:P,cssClass:"modal"});case 2:return n=e.sent,e.next=5,n.present();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}))}},{key:"presentModalProps",value:function(e){return Object(u.b)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.modalCtrl.create({component:P,cssClass:"modal",componentProps:{name:e.nameProvider,nameCompany:e.nameCompany,category:e.category,telephone:e.telephone,email:e.email,providerId:e.id}});case 2:return o=n.sent,n.next=5,o.present();case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}},n,this)}))}},{key:"presentAlert",value:function(e){return Object(u.b)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var o,r=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.alerCtrl.create({header:"\xbfEst\xe1 seguro que desea eliminar?",buttons:[{text:"Cancelar"},{text:"OK",handler:function(){r.providerService.deleteProvider(e)}}]});case 2:return o=n.sent,n.next=5,o.present();case 5:case"end":return n.stop()}},n,this)}))}}]),n}(),w.\u0275fac=function(e){return new(e||w)(b.Lb(l.D),b.Lb(l.E),b.Lb(p),b.Lb(l.a))},w.\u0275cmp=b.Fb({type:w,selectors:[["app-providers"]],decls:33,vars:2,consts:[[1,"ion-no-border",3,"translucent"],["slot","start"],[3,"click"],["slot","icon-only","name","menu-outline"],[1,"ion-text-center"],["slot","end"],["color","success","fill","solid","shape","round",3,"click"],["slot","start","name","add"],["size","12"],["size","3",1,"ion-text-center"],["size","2",1,"ion-text-center"],["size","1",1,"ion-text-center"],[4,"ngFor","ngForOf"],["size","2"],["color","danger",1,"ion-margin-end",3,"click"],["slot","icon-only","name","trash-outline"],["color","success",3,"click"],["slot","icon-only","name","pencil-outline"]],template:function(e,n){1&e&&(b.Ob(0,"ion-header",0),b.Ob(1,"ion-toolbar"),b.Ob(2,"ion-buttons",1),b.Ob(3,"ion-button",2),b.Wb("click",function(){return n.onToggleMenu()}),b.Mb(4,"ion-icon",3),b.Nb(),b.Nb(),b.Ob(5,"ion-title",4),b.mc(6," Proveedores "),b.Nb(),b.Ob(7,"ion-buttons",5),b.Ob(8,"ion-button",6),b.Wb("click",function(){return n.presentModal()}),b.Mb(9,"ion-icon",7),b.mc(10," Agregar "),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Ob(11,"ion-content"),b.Ob(12,"ion-grid"),b.Ob(13,"ion-row"),b.Ob(14,"ion-col",8),b.Ob(15,"ion-grid"),b.Ob(16,"ion-row"),b.Ob(17,"ion-col",9),b.Ob(18,"h6"),b.mc(19," Nombre "),b.Nb(),b.Nb(),b.Ob(20,"ion-col",10),b.Ob(21,"h6"),b.mc(22," Compa\xf1ia "),b.Nb(),b.Nb(),b.Ob(23,"ion-col",11),b.Ob(24,"h6"),b.mc(25," Categor\xeda "),b.Nb(),b.Nb(),b.Ob(26,"ion-col",10),b.Ob(27,"h6"),b.mc(28," Celular "),b.Nb(),b.Nb(),b.Ob(29,"ion-col",10),b.Ob(30,"h6"),b.mc(31," Correo "),b.Nb(),b.Nb(),b.Nb(),b.kc(32,x,21,5,"ion-row",12),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb()),2&e&&(b.ec("translucent",!0),b.Bb(32),b.ec("ngForOf",n.allProviders))},directives:[l.j,l.A,l.e,l.d,l.k,l.y,l.g,l.i,l.t,l.f,a.i],styles:[""]}),w)}],I=((M=function n(){e(this,n)}).\u0275fac=function(e){return new(e||M)},M.\u0275mod=b.Jb({type:M}),M.\u0275inj=b.Ib({imports:[[s.j.forChild(B)],s.j]}),M),j=((E=function n(){e(this,n)}).\u0275fac=function(e){return new(e||E)},E.\u0275mod=b.Jb({type:E}),E.\u0275inj=b.Ib({imports:[[a.c,c.k,l.B,I]]}),E)}}])}();